(()=>{var y=(o,u,r)=>new Promise((n,d)=>{var h=a=>{try{l(r.next(a))}catch(s){d(s)}},C=a=>{try{l(r.throw(a))}catch(s){d(s)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(h,C);l((r=r.apply(o,u)).next())});document.addEventListener("DOMContentLoaded",()=>{document.getElementById("astrologerWpBirthChartForm")&&g("astrologerWpBirthChartForm","astrologerWpBirthChartCityInput","astrologerWpBirthChartNationInput","astrologerWpBirthChartLatitudeInput","astrologerWpBirthChartLongitudeInput","astrologerWpBirthChartTimezoneInput","astrologerWpBirthChartCitySuggestions"),document.getElementById("astrologerWpSynastryChartForm")&&(g("astrologerWpSynastryChartForm","astrologerWpSynastryChartFirstCityInput","astrologerWpSynastryChartFirstNationInput","astrologerWpSynastryChartFirstLatitudeInput","astrologerWpSynastryChartFirstLongitudeInput","astrologerWpSynastryChartFirstTimezoneInput","astrologerWpSynastryChartFirstCitySuggestions"),g("astrologerWpSynastryChartForm","astrologerWpSynastryChartSecondCityInput","astrologerWpSynastryChartSecondNationInput","astrologerWpSynastryChartSecondLatitudeInput","astrologerWpSynastryChartSecondLongitudeInput","astrologerWpSynastryChartSecondTimezoneInput","astrologerWpSynastryChartSecondCitySuggestions")),document.getElementById("astrologerWpTransitChartForm")&&(g("astrologerWpTransitChartForm","astrologerWpTransitChartSubjectCityInput","astrologerWpTransitChartSubjectNationInput","astrologerWpTransitChartSubjectLatitudeInput","astrologerWpTransitChartSubjectLongitudeInput","astrologerWpTransitChartSubjectTimezoneInput","astrologerWpTransitChartSubjectCitySuggestions"),g("astrologerWpTransitChartForm","astrologerWpTransitChartTransitCityInput","astrologerWpTransitChartTransitNationInput","astrologerWpTransitChartTransitLatitudeInput","astrologerWpTransitChartTransitLongitudeInput","astrologerWpTransitChartTransitTimezoneInput","astrologerWpTransitChartTransitCitySuggestions"))});function g(o,u,r,n,d,h,C){return y(this,null,function*(){let l=document.getElementById(o),a=document.getElementById(u),s=document.getElementById(r),I=document.getElementById(n),W=document.getElementById(d),S=document.getElementById(h),p=document.getElementById(C);function T(c,m){let i;return function(...e){clearTimeout(i),i=setTimeout(()=>c.apply(this,e),m)}}a.addEventListener("input",T(()=>y(this,null,function*(){let c=yield v(a.value,"");if(!c)return;let m=c.data.map(e=>`
                    <li
                        role="option"
                        class="dropdown-item"
                        data-value-country-code="${e.countryCode}"
                        data-value-city="${e.name}"
                        data-value-lat="${e.lat}"
                        data-value-lng="${e.lng}"
                        data-value-timezone="${e.timezonestr}"
                        tabindex="0">
                        ${e.name}, ${e.countryCode}
                    </li>`).join("");p.innerHTML=m,p.style.display="block";let i=l.querySelectorAll(".dropdown-item");i.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),I.value=t.target.getAttribute("data-value-lat"),W.value=t.target.getAttribute("data-value-lng"),a.value=t.target.getAttribute("data-value-city"),S.value=t.target.getAttribute("data-value-timezone"),s.value=t.target.getAttribute("data-value-country-code"),p.style.display="none",a.value=`${t.target.getAttribute("data-value-city")}, ${t.target.getAttribute("data-value-country-code")}`})}),i.forEach(e=>{e.addEventListener("keydown",t=>{t.key==="Tab"?(i.forEach(b=>b.setAttribute("aria-selected","false")),e.setAttribute("aria-selected","true"),I.value=t.target.getAttribute("data-value-lat"),W.value=t.target.getAttribute("data-value-lng"),a.value=t.target.getAttribute("data-value-city"),S.value=t.target.getAttribute("data-value-timezone"),s.value=t.target.getAttribute("data-value-country-code"),a.value=`${t.target.getAttribute("data-value-city")}, ${t.target.getAttribute("data-value-country-code")}`):t.key==="Enter"&&(p.style.display="none")})})})),500)})}function v(o,u){return y(this,null,function*(){let r=null;if(o.length>2){try{r=yield(yield fetch(`${astrologerWpAjax.ajaxurl}?action=search_city&city=${o}&nation=${u}`)).json()}catch(n){console.error("Error fetching city data:",n)}return r}return r})}})();
//# sourceMappingURL=frontend.js.map
